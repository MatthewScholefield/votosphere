(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{210:function(e,t,a){e.exports=a(440)},215:function(e,t,a){},44:function(e,t,a){},440:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(60),i=a.n(l),c=(a(215),a(16)),o=a(17),s=a(19),u=a(18),m=a(20),d=(a(44),a(45),a(455)),h=a(447),p=a(441),f=a(457),E=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(d.a,{stackable:!0,size:"massive"},r.a.createElement(h.a,null,r.a.createElement(d.a.Item,{href:"#"},r.a.createElement(p.a,{src:"images/logo.png",style:{height:30}})),r.a.createElement(d.a.Item,{href:"#"},"Votosphere"),r.a.createElement(d.a.Menu,{position:"right"},[{name:"+",key:"/createPoll"},{name:"View",key:"viewPoll"}].map(function(t){var a=t.name,n=t.key;return r.a.createElement(f.a,{key:n,render:function(t){var l=t.history;return r.a.createElement(d.a.Item,{onClick:function(t,a){var r=a.name;l.push(n),e.setState({activeItem:r})},active:!1,name:n,content:a})}})}))))}}]),t}(n.Component),b=a(174),v=a(458),g=a(459),y=a(460),j=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e="#"===this.props.href,t=r.a.createElement(b.a,{name:this.props.name,size:"huge",style:{color:"#777777"}}),a=e?t:r.a.createElement("a",{href:this.props.href,target:"_blank",rel:"noopener noreferrer"},t);return e?r.a.createElement(v.a,{trigger:a,content:"We don't actually have a page on "+this.props.name+" yet."}):a}}]),t}(n.Component),O=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return[r.a.createElement("div",{style:{height:40}}),r.a.createElement(d.a,{attached:"bottom",style:{backgroundColor:"#F5F5F5"}},r.a.createElement(h.a,{style:{alignContent:"center",textAlign:"center"}},r.a.createElement(g.a,{centered:!0,stackable:!0,style:{padding:40}},r.a.createElement(g.a.Column,{mobile:16,tablet:4,computer:4},r.a.createElement(y.a,null,"About Us"),r.a.createElement("p",null,"We are a platform for creating quick, simple polls. You can find more info about the project on GitHub.")),r.a.createElement(g.a.Column,{mobile:16,tablet:4,computer:4},r.a.createElement(y.a,null,"Social"),r.a.createElement(j,{name:"twitter",href:"#"}),r.a.createElement(j,{name:"facebook",href:"#"}),r.a.createElement(j,{name:"github",href:"https://github.com/matthewscholefield/Votosphere"}),r.a.createElement(j,{name:"youtube",href:"#"})),r.a.createElement(g.a.Column,{mobile:16,tablet:4,computer:4},r.a.createElement(y.a,null,"More Info"),r.a.createElement("p",null,"Votosphere is a simple platform to create polls. The description is rendered as markdown."),r.a.createElement("p",null,"\xa9 2018 Matthew Scholefield")))))]}}]),t}(n.Component),k=a(453),w=a(454),C=a(184),S=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(C.Parallax,{blur:0,bgImage:"images/bg.jpg",bgImageAlt:"Background",strength:200},r.a.createElement(h.a,{text:!0,style:{color:"#fffffff"}},r.a.createElement("div",{key:"spacer",style:{height:100}}),r.a.createElement(y.a,{as:"h1",inverted:!0,className:"white"},"Votosphere"),r.a.createElement("p",{className:"inverted"},"A simple poll creator."),r.a.createElement(f.a,{render:function(e){var t=e.history;return r.a.createElement(w.a,{primary:!0,onClick:function(){return t.push("/createPoll")}},"Create a Poll ")}}),r.a.createElement("div",{key:"spacer",style:{height:100}}))),r.a.createElement("div",{style:{height:40}}),r.a.createElement(h.a,{text:!0},r.a.createElement(g.a,{padded:!0},r.a.createElement(g.a.Row,{columns:3},r.a.createElement(g.a.Column,null,r.a.createElement(y.a,{as:"h2",icon:!0},r.a.createElement(b.a,{name:"users"}),"Open Source",r.a.createElement(y.a.Subheader,null,"Want to learn more? You can view all of the source code on GitHub."))),r.a.createElement(g.a.Column,null,r.a.createElement(y.a,{as:"h2",icon:!0},r.a.createElement(b.a,{name:"tv"}),"Simple",r.a.createElement(y.a.Subheader,null,"Created with ease of use in mind, you can make new polls in a matter of seconds."))),r.a.createElement(g.a.Column,null,r.a.createElement(y.a,{as:"h2",icon:!0},r.a.createElement(b.a,{name:"check"}),"Refreshing",r.a.createElement(y.a.Subheader,null,"A UI that gets out of your way while still looking like it's from this decade.")))))))}}]),t}(n.Component),x=a(65),D=a(63),I=a(185),P=a(461),F=a(452),N=a(449),T=a(450),R=a(448);function A(e){return fetch("https://api.myjson.com/bins",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json; charset=utf-8"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){return e.uri.replace("https://api.myjson.com/bins/","")})}function V(e){return fetch("https://api.myjson.com/bins/"+e,{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json; charset=utf-8"},redirect:"follow",referrer:"no-referrer"}).then(function(e){return e.json()})}var M=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",description:"",numFields:1,fieldNames:[],agreed:!1,submitting:!1,pollUrl:"",loading:!1,shuffle:!1,isExtraDescOpen:{},extraDesc:{}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(h.a,null,r.a.createElement("div",{style:{height:40}}),r.a.createElement(y.a,null,"Create Poll"),r.a.createElement(g.a,{centered:!0},r.a.createElement(g.a.Row,null,r.a.createElement(g.a.Column,{computer:6,tablet:12,mobile:16},r.a.createElement(P.a,{fluid:!0,raised:!0,style:{padding:20}},r.a.createElement(F.a,null,r.a.createElement(F.a.Field,{control:N.a,value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})},label:"Title",placeholder:"Title..."}),r.a.createElement(F.a.Field,{control:T.a,value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})},label:"Description",placeholder:"Description..."}),r.a.createElement(F.a.Group,{inline:!0},r.a.createElement("label",null,"Poll Options")),r.a.createElement(F.a.Group,{inline:!0},r.a.createElement(R.a,{label:"Shuffle",onChange:function(t,a){e.setState({shuffle:a.checked})}})),this.state.fieldNames.concat([""]).map(function(t,a){return r.a.createElement(F.a.Field,{key:a},r.a.createElement("label",null,"Option "+(a+1)),r.a.createElement(F.a.Field,null,r.a.createElement(N.a,{value:t,label:r.a.createElement(w.a,{icon:"ellipsis horizontal",onClick:function(t){e.setState(function(t){var n=e.state.isExtraDescOpen;return n[a]=!n[a]||!!e.state.extraDesc[a],{isExtraDescOpen:n}})}}),labelPosition:"right",placeholder:"New poll option...",onChange:function(t){var n=t.target.value;e.setState(function(e){return n.length>0?e.fieldNames[a]=n:e.fieldNames.splice(a),e})}})),r.a.createElement(F.a.Field,{key:2*a},e.state.isExtraDescOpen[a]?r.a.createElement(F.a.Field,{control:T.a,onChange:function(t){var n=t.target.value;e.setState(function(e){return{extraDesc:Object(I.a)({},e.extraDesc,Object(D.a)({},a,n))}})},placeholder:"Option Description...",value:e.state.extraDesc[a]}):r.a.createElement("div",null)))}),r.a.createElement(F.a.Field,null,r.a.createElement(v.a,{trigger:r.a.createElement(R.a,{label:"I agree to the Terms and Conditions",onChange:function(t,a){e.setState({agreed:a.checked})}}),content:"You agree to use this service in a way that breaks no laws and is not evil."})),r.a.createElement(f.a,{render:function(t){var a=t.history;return r.a.createElement(F.a.Field,null,r.a.createElement(w.a,{onClick:function(){e.setState({loading:!0});for(var t=e.state.fieldNames,n=Object.assign.apply(Object,[{}].concat(Object(x.a)(t.map(function(e){return Object(D.a)({},e,0)})))),r={},l=Object.values(e.state.extraDesc),i=Object.keys(e.state.extraDesc),c=0;c<l.length;++c)r[e.state.fieldNames[i[c]]]=l[c];A({counts:n,numResponses:0}).then(function(t){return A({title:e.state.title,description:e.state.description,extraDescriptions:r,fields:e.state.fieldNames,counts:t,shuffle:e.state.shuffle})}).then(function(e){a.push("/poll?id="+e)})},disabled:!e.state.agreed||e.state.loading||!e.state.title.length>0||!e.state.fieldNames.length>0},"Create"))}})))))))}}]),t}(n.Component),W=a(68),G=a.n(W),U=a(69),z=a.n(U),B=a(197);var J=a(194),Y=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(J.Slider,{color:"red",inverted:!1,settings:{start:.5,min:0,max:1,step:.01,onChange:function(t){e.props.onChange(t)}},style:{marginBottom:14}})}}]),t}(n.Component),H=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={title:"",description:"",extraDescriptions:{},fields:[],choices:{},counts:"",id:"",answeredIds:[]},a.handleRadioUpdate=function(e,t){a.setState(function(a){var n=a.choices;return n[e]=t,{choices:n}})},a.submitForm=function(e){var t=a.state.choices;V(a.state.counts).then(function(e){return n=a.state.counts,r={counts:Object.assign.apply(Object,[{}].concat(Object(x.a)(Object.keys(t).map(function(a){return Object(D.a)({},a,e.counts[a]+t[a])})))),numResponses:e.numResponses+1},fetch("https://api.myjson.com/bins/"+n,{method:"PUT",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json; charset=utf-8"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify(r)}).then(function(e){return e.json()});var n,r}).then(function(t){var n=a.state.answeredIds;n.push(a.state.id),a.cookies.set("answeredIds",n.join(":"),{expires:new Date(21459168e5)}),e.push("/viewPoll?id="+a.state.id)})},a.renderField=function(e){var t=r.a.createElement(Y,{amount:a.state.choices[e]||.5,onChange:function(t){return a.handleRadioUpdate(e,t)}}),n=a.state.extraDescriptions[e];return n?[r.a.createElement(F.a.Field,null,r.a.createElement("label",{style:{fontSize:"1.2rem"}},e)),r.a.createElement("p",null,r.a.createElement(z.a,{source:n})),t]:[r.a.createElement(F.a.Group,{inline:!0,key:e},r.a.createElement("label",null,e+":")),t]},a.cookies=new B.a,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({answeredIds:(this.cookies.get("answeredIds")||"").split(":")});var t=G.a.parse(this.props.location.search).id;void 0!==t&&V(t).then(function(a){a.shuffle&&function(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),n=[e[a],e[t]];e[t]=n[0],e[a]=n[1]}}(a.fields),e.setState({title:a.title,description:a.description,extraDescriptions:a.extraDescriptions,fields:a.fields,counts:a.counts,id:t})})}},{key:"render",value:function(){var e=this;return this.state.id&&this.state.answeredIds.includes(this.state.id)?r.a.createElement(f.a,{render:function(t){return t.history.push("/viewPoll?id="+e.state.id),r.a.createElement("div",null)}}):r.a.createElement(h.a,null,r.a.createElement("div",{style:{height:40}}),r.a.createElement(y.a,null,this.state.title||"Respond to Poll"),r.a.createElement("div",{style:{listStylePosition:"inside"}},r.a.createElement(z.a,{source:this.state.description||"Respond to a Poll from a link"})),r.a.createElement("div",{style:{height:20}}),r.a.createElement(g.a,{centered:!0},r.a.createElement(g.a.Row,null,r.a.createElement(g.a.Column,{computer:6,tablet:12,mobile:16},r.a.createElement(P.a,{fluid:!0,raised:!0,style:{padding:20}},r.a.createElement(F.a,null,this.state.fields.map(function(t){return e.renderField(t)}),r.a.createElement(f.a,{render:function(t){var a=t.history;return r.a.createElement(F.a.Field,{control:w.a,onClick:function(){return e.submitForm(a)},disabled:Object.keys(e.state.choices).length!==e.state.fields.length},"Continue")}})))))))}}]),t}(n.Component),q=a(451),$=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={title:"",description:"",fields:[],countsData:{counts:{}},id:"",badId:!1,loading:!0,idText:""},a.updateData=function(e){e=e||"",a.setState({loading:!0,id:e,badId:!1}),0!==e.length?V(e).then(function(e){return void 0!==e.fields&&void 0!==e.counts||a.setState({badId:!0,id:""}),a.setState({title:e.title,description:e.description,fields:e.fields}),V(e.counts)}).then(function(e){a.setState({countsData:e,loading:!1})}).catch(function(e){a.setState({badId:!0,loading:!1,id:""})}):a.setState({loading:!1})},a.renderPollView=function(){var e=G.a.parse(a.props.location.search).id;e!==a.state.id&&a.updateData(e);var t=a.state.countsData.counts||{},n=0===Object.keys(t).length?1:Math.max.apply(Math,Object(x.a)(Object.values(t))),l=["orange","yellow","olive","teal","blue","violet","purple","pink","brown","grey","black"];return void 0===a.state.fields?[]:[a.state.fields.map(function(e,a){return r.a.createElement(q.a,{progress:"value",key:e,value:t[e]||0,total:n,color:l[a%l.length]},e)}),r.a.createElement(w.a,{onClick:function(){return a.updateData(a.state.id)},icon:!0,labelPosition:"right",disabled:a.state.loading},"Refresh",r.a.createElement(b.a,{name:"refresh"}))]},a.renderAskIdView=function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Enter poll id:"),r.a.createElement(N.a,{fluid:!0,error:a.state.badId,type:"text",value:a.state.idText,action:!0,placeholder:"ie. pc9z1...",onChange:function(e){return a.setState({idText:e.target.value})}},r.a.createElement("input",null),r.a.createElement(f.a,{render:function(e){var t=e.history;return r.a.createElement(w.a,{onClick:function(){t.push("/viewPoll?id="+a.state.idText),a.updateData(a.state.idText)}},"Submit")}})))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.updateData(G.a.parse(this.props.location.search).id)}},{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement("div",{style:{height:40}}),r.a.createElement(y.a,null,this.state.title||"View Poll"),r.a.createElement("div",{style:{listStylePosition:"inside"}},r.a.createElement(z.a,{source:this.state.description||"View stats on an existing poll"})),r.a.createElement("div",{style:{height:20}}),r.a.createElement(g.a,{centered:!0},r.a.createElement(g.a.Row,null,r.a.createElement(g.a.Column,{computer:6,tablet:12,mobile:16},r.a.createElement(P.a,{raised:!0,style:{padding:20}},this.state.id?this.renderPollView():this.renderAskIdView())))))}}]),t}(n.Component),_=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(k.a,null,r.a.createElement("div",{className:"App Site"},r.a.createElement("div",{className:"Site-content"},r.a.createElement("div",{className:"App-header"},r.a.createElement(E,{key:"navbar"})),r.a.createElement("div",{className:"main"},r.a.createElement(f.a,{key:1,exact:!0,path:"/",component:S}),r.a.createElement(f.a,{key:2,exact:!0,path:"/createPoll",component:M}),r.a.createElement(f.a,{key:3,exact:!0,path:"/poll",component:H}),r.a.createElement(f.a,{key:4,exact:!0,path:"/viewPoll",component:$}))),r.a.createElement(O,{key:"footer"})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[210,2,1]]]);
//# sourceMappingURL=main.a42cd066.chunk.js.map